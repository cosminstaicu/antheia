<?php
namespace Antheia\Antheia\Classes\Slide;
use Antheia\Antheia\Classes\AbstractClass;
use Antheia\Antheia\Classes\Internals;
use Antheia\Antheia\Interfaces\HtmlCode;
use Antheia\Antheia\Interfaces\HtmlId;
/**
 * A panel that contains two containers that can be toggled by the user.
 * @author Cosmin Staicu
 *
 */
class SlidePanel extends AbstractClass implements HtmlId, HtmlCode {
	private $initialVisible;
	private $initialHidden;
	private $htmlId;
	private $testId;
	private $control;
	static private $itemCounter = 0;
	public function __construct() {
		parent::__construct();
		$this->initialVisible = [];
		$this->initialHidden = [];
		$this->setHtmlId('ant_panelSlide_'.self::$itemCounter);
		$this->testId = '';
		self::$itemCounter++;
		$this->control = new SlideTrigger($this);
	}
	public function setHtmlId(string $id):void {
		$this->htmlId = $id;
	}
	/**
	 * Returns the HTML id of the panel. The ID is generated automatically
	 * @return string the autogenerated html id of the panel
	 */
	public function getHtmlId():string {
		return $this->htmlId;
	}
	public function setTestId(string $id):void {
		$this->testId = $id;
	}
	/**
	 * Adds an item to the initially visible container of the panel
	 * @param HtmlCode $item the item to be added
	 */
	public function addVisible(HtmlCode $item):void {
		$this->initialVisible[] = $item;
	}
	/**
	 * Adds an item to the initially hidden container of the panel
	 * @param HtmlCode $item the item to be added
	 */
	public function addHidden(HtmlCode $item):void {
		$this->initialHidden[] = $item;
	}
	/**
	 * Returns the controller for the containers toggle
	 * @return SlideTrigger the controller for the containers toggle
	 */
	public function getController():SlideTrigger {
		return $this->control;
	}
	public function getHtml():string {
		$code = '<div ';
		$code .= Internals::getHtmlIdCode($this->htmlId, $this->testId);
		$code .= ' class="ant_slide">';
		$code .= '<div>';
		/** @var HtmlCode $element */
		foreach ($this->initialHidden as $element) {
			$code .= $element->getHtml();
		}
		$code .= '</div><div>';
		/** @var HtmlCode $element */
		foreach ($this->initialVisible as $element) {
			$code .= $element->getHtml();
		}
		$code .= '</div></div>';
		return $code;
	}
}
?>
